(function(n){function t(t){function o(n){i.active&&(a(n),t.getPlaceholder().trigger("plotselecting",[e()]))}function s(t){if(t.which==1){document.body.focus();document.onselectstart!==undefined&&r.onselectstart==null&&(r.onselectstart=document.onselectstart,document.onselectstart=function(){return!1});document.ondrag!==undefined&&r.ondrag==null&&(r.ondrag=document.ondrag,document.ondrag=function(){return!1});l(i.first,t);i.active=!0;u=function(n){p(n)};n(document).one("mouseup",u)}}function p(n){return u=null,document.onselectstart!==undefined&&(document.onselectstart=r.onselectstart),document.ondrag!==undefined&&(document.ondrag=r.ondrag),i.active=!1,a(n),f()?h():(t.getPlaceholder().trigger("plotunselected",[]),t.getPlaceholder().trigger("plotselecting",[null])),!1}function e(){if(!f()||!i.show)return null;var r={},u=i.first,e=i.second;return n.each(t.getAxes(),function(n,t){if(t.used){var i=t.c2p(u[t.direction]),f=t.c2p(e[t.direction]);r[n]={from:Math.min(i,f),to:Math.max(i,f)}}}),r}function h(){var n=e();t.getPlaceholder().trigger("plotselected",[n]);n.xaxis&&n.yaxis&&t.getPlaceholder().trigger("selected",[{x1:n.xaxis.from,y1:n.yaxis.from,x2:n.xaxis.to,y2:n.yaxis.to}])}function c(n,t,i){return t<n?n:t>i?i:t}function l(n,r){var u=t.getOptions(),f=t.getPlaceholder().offset(),e=t.getPlotOffset();n.x=c(0,r.pageX-f.left-e.left,t.width());n.y=c(0,r.pageY-f.top-e.top,t.height());u.selection.mode=="y"&&(n.x=n==i.first?0:t.width());u.selection.mode=="x"&&(n.y=n==i.first?0:t.height())}function a(n){n.pageX!=null&&(l(i.second,n),f()?(i.show=!0,t.triggerRedrawOverlay()):v(!0))}function v(n){i.show&&(i.show=!1,t.triggerRedrawOverlay(),n||t.getPlaceholder().trigger("plotunselected",[]))}function y(n,i){var e,r,u,f,o=t.getAxes(),s,h;for(s in o)if(e=o[s],e.direction==i&&(f=i+e.n+"axis",n[f]||e.n!=1||(f=i+"axis"),n[f])){r=n[f].from;u=n[f].to;break}return n[f]||(e=i=="x"?t.getXAxes()[0]:t.getYAxes()[0],r=n[i+"1"],u=n[i+"2"]),r!=null&&u!=null&&r>u&&(h=r,r=u,u=h),{from:r,to:u,axis:e}}function w(n,r){var u,e=t.getOptions();e.selection.mode=="y"?(i.first.x=0,i.second.x=t.width()):(u=y(n,"x"),i.first.x=u.axis.p2c(u.from),i.second.x=u.axis.p2c(u.to));e.selection.mode=="x"?(i.first.y=0,i.second.y=t.height()):(u=y(n,"y"),i.first.y=u.axis.p2c(u.from),i.second.y=u.axis.p2c(u.to));i.show=!0;t.triggerRedrawOverlay();!r&&f()&&h()}function f(){var n=t.getOptions().selection.minSize;return Math.abs(i.second.x-i.first.x)>=n&&Math.abs(i.second.y-i.first.y)>=n}var i={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},r={},u=null;t.clearSelection=v;t.setSelection=w;t.getSelection=e;t.hooks.bindEvents.push(function(n,t){var i=n.getOptions();i.selection.mode!=null&&(t.mousemove(o),t.mousedown(s))});t.hooks.drawOverlay.push(function(t,r){var u,e,o;if(i.show&&f()){u=t.getPlotOffset();e=t.getOptions();r.save();r.translate(u.left,u.top);o=n.color.parse(e.selection.color);r.strokeStyle=o.scale("a",.8).toString();r.lineWidth=1;r.lineJoin=e.selection.shape;r.fillStyle=o.scale("a",.4).toString();var s=Math.min(i.first.x,i.second.x)+.5,h=Math.min(i.first.y,i.second.y)+.5,c=Math.abs(i.second.x-i.first.x)-1,l=Math.abs(i.second.y-i.first.y)-1;r.fillRect(s,h,c,l);r.strokeRect(s,h,c,l);r.restore()}});t.hooks.shutdown.push(function(t,i){i.unbind("mousemove",o);i.unbind("mousedown",s);u&&n(document).unbind("mouseup",u)})}n.plot.plugins.push({init:t,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery);
//# sourceMappingURL=jquery.flot.selection.min.js.map
